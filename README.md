# littlefs-forensics-tool
This project is a forensic toolkit for inspecting and extracting data from LittleFS v2 filesystem images. It includes custom Python scripts to:

- Parse the superblock and inspect volume geometry
- Print the directory tree and extract live file contents
- Manually decode metadata tags (e.g., NAME, STRUCT)
- Recover deleted **inline files** from unfinished commits, even when CRCs are missing
📘 This repository accompanies a full  analysis report → `report.pdf`

## 🚀 Setup

1. Clone the repository :

```bash
git clone https://github.com/emnabg/littlefs-forensics-tool.git
cd littlefs-forensics-tool
```
2. (Optional) Create and activate a virtual environment:
```bash
python3 -m venv venv
source venv/bin/activate
```
3. Install the required dependencies:
```bash
pip install -r requirements.txt
```

## 🗂️ project Structure

I’ve tried to make the purpose of each file as clear as possible. If anything is unclear, some scripts have comments inside for more details.

### `samples/`

- **`create_image.py`**: Script to generate a test LittleFS image with multiple directories and a deleted file.
- **`FlashMemory.bin`**: The actual LittleFS image file created by `create_image.py`.

### `tool/`

- **`list_fs.py`**: Lists the directory tree and optionally dumps the contents of all files.
- **`superblock.py`**: Parses and prints the superblock (version, block size, root pair, etc.).
- **`scan.py`**: This script dumps and decodes the contents of all blocks in a LittleFS image, showing parsed metadata tags (NAME, STRUCT, CRC, etc.) for each,It provides a readable breakdown of each block, including tag offsets, types, IDs, lengths, and payloads.
- **`recover_files.py`**: Recovers a deleted inline file by name .
- **`data_struct_dump.txt`**: Output of scan.py.
- **`hex_dump.txt`**: Raw hexadecimal dump of the LittleFS image (FlashMemory.bin), used to manually inspect block-level data and verify metadata tag positions(generated by hexdump -C samples/FlashMemory.bin > tool/hex_dump.txt).
- **`recovered_to-be-deleted.txt`**: recovered file with recover_files.py script .


### Root Directory

- **`requirements.txt`**: Contains Python dependencies (`littlefs-python`).
- **`README.md`**: This file — an overview of the project, usage, and structure.
-  **`report.pdf`**: Final project report documenting the full forensic analysis process, design exploration, implementation steps, and observations.


---


## 🧪 How to Use the Scripts
Below is a summary of the main scripts and how to run them. All paths assume you're running from the project root (`littlefs-forensics-tool/`).

---

###  `samples/create_image.py`

Creates a test LittleFS image (`FlashMemory.bin`) with several directories and a deleted file.

```bash
python3 samples/create_image.py
```
###  `tool/list_fs.py`
Lists the full directory structure of the image. Use -c to also print the contents of each file.
You can also specify the block size if needed(512 is defaukt value)

```bash
python3 tool/list_fs.py samples/FlashMemory.bin
python3 tool/list_fs.py samples/FlashMemory.bin -c
python3 tool/list_fs.py samples/FlashMemory.bin -b 512
```
###  `tool/superblock.py`
Parses and prints the superblock fields (magic string, version, geometry)
```bash
python3 tool/superblock.py samples/FlashMemory.bin
```
###  `tool/scan.py`
Decodes metadata tags (NAME, STRUCT etc.) from every block and prints them with offset and content.
```bash
python3 tool/scan.py samples/FlashMemory.bin

```
###  `tool/recover_files.py`
Recovers a deleted inline file by name.(to-be-deleted.txt for our case)
```bash
python3 tool/recover_files.py samples/FlashMemory.bin to-be-deleted.txt
```
The recovered file will be saved as:
```bash
recovered_to-be-deleted.txt
```
## 📄 License

This project is for educational and academic purposes.
